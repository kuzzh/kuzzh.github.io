<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/main.css">

    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/modal.js"></script>
    <script type="text/javascript" src="js/utils.js"></script>
    <script type="text/javascript" src="js/mobileua.js"></script>
    <script type="text/javascript" src="js/ba.js"></script>
    <script type="text/javascript" src="js/game.js"></script>
</head>

<body>
    <img id="back" src="images/back.png" style="margin:10px;" onclick="history.back()" />
    <canvas id="canvas">Your browser does not support the <code>canvas</code> element.</canvas>
    <audio id="dropRing" src="tones/GeneralButton.mp3" type="audio/mp3" preload="auto">
        Your browser does not support the
        <code>audio</code> element.
    </audio>
    <audio id="winRing" src="tones/Victory.mp3" type="audio/mp3" preload="auto">
        Your browser does not support the
        <code>audio</code> element.
    </audio>
    <audio id="ballonRing" src="tones/ballon.mp3" type="audio/mp3" preload="auto">
        Your browser does not support the
        <code>audio</code> element.
    </audio>

    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static"
        data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <!--
                <div class="modal-header">
                    <h4 class="modal-title" id="myModalLabel">
                        模态框（Modal）标题
                    </h4>
                </div>
                -->
                <div class="modal-body text-primary" style="text-align: center;font-size: 36px">
                    恭喜过关~~~
                    <p>
                        <img src="images/1.gif" />
                        <img src="images/2.gif" />
                        <img src="images/3.gif" />
                        <img src="images/4.gif" />
                        <img src="images/5.gif" />
                    </p>
                </div>
                <div class="modal-footer" style="text-align: center">
                    <button type="button" class="btn btn-primary" id="replay">再玩一次
                            </button>
                    <button type="button" class="btn btn-default" onclick="history.back()">
                                返回
                            </button>
                </div>
            </div>
        </div>
    </div>

    <script>
                                                                           $(document).ready(function () {
                                                                               let imageUrl = document.location.href.split('?')[1];
                                                                               let canvas = document.querySelector('#canvas');
                                                                               let jigsawGame = new JigsawGame(canvas, imageUrl);
                                                                               jigsawGame.init();

                                                                               $("#replay").click(function () {
                                                                                   jigsawGame.replay();
                                                                                   $("#myModal").modal('hide');
                                                                               });

                                                                               // Reposition when a modal is shown
                                                                               $('.modal').on('show.bs.modal', reposition);
                                                                               // Reposition when the window is resized
                                                                               $(window).on('resize', function () {
                                                                                   $('.modal:visible').each(reposition);
                                                                               });
                                                                           });
    </script>
</body>

</html>