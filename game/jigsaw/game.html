<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Jigsaw Game by Kuzzh</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/main.css">

    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/modal.js"></script>
    <script type="text/javascript" src="js/utils.js"></script>
    <script type="text/javascript" src="js/mobileua.js"></script>
    <script type="text/javascript" src="js/ba.js"></script>
    <script type="text/javascript" src="js/game.js"></script>
</head>

<body>

    <div>
        <div class="pull-left">
            <a href="#" onclick="window.location.href='index.html'"><img id="back" src="images/back.png" style="margin:10px;" /></a>
        </div>
        <div class="btn-group pull-right" style="margin: 10px">
            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">规格 
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <li><a href="#" onclick="jigsawGame.replay(2,2)">2x2</a></li>
                <li><a href="#" onclick="jigsawGame.replay(3,3)">3x3</a></li>
                <li><a href="#" onclick="jigsawGame.replay(4,4)">4x4</a></li>
                <li><a href="#" onclick="jigsawGame.replay(5,5)">5x5</a></li>
            </ul>
        </div>
    </div>
    <canvas id="canvas">Your browser does not support the <code>canvas</code> element.</canvas>
    <audio id="dropRing" src="tones/GeneralButton.mp3" type="audio/mp3" preload="auto">
        Your browser does not support the
        <code>audio</code> element.
    </audio>
    <audio id="winRing" src="tones/Victory.mp3" type="audio/mp3" preload="auto">
        Your browser does not support the
        <code>audio</code> element.
    </audio>
    <audio id="ballonRing" src="tones/ballon.mp3" type="audio/mp3" preload="auto">
        Your browser does not support the
        <code>audio</code> element.
    </audio>

    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static"
        data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <!--
                <div class="modal-header">
                    <h4 class="modal-title" id="myModalLabel">
                        模态框（Modal）标题
                    </h4>
                </div>
                -->
                <div class="modal-body text-primary" style="text-align: center;font-size: 36px">
                    恭喜过关~~~
                    <p>
                        <img src="images/1.gif" />
                        <img src="images/2.gif" />
                        <img src="images/3.gif" />
                        <img src="images/4.gif" />
                        <img src="images/5.gif" />
                    </p>
                </div>
                <div class="modal-footer" style="text-align: center">
                    <button type="button" class="btn btn-primary" id="replay">再玩一次
                            </button>
                    <button type="button" class="btn btn-default" onclick="history.back()">
                                返回
                            </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        var jigsawGame;
        $(document).ready(function () {
            let imageUrl = document.location.href.split('?')[1];
            let canvas = document.querySelector('#canvas');
            jigsawGame = new JigsawGame(canvas, imageUrl);
            jigsawGame.init();

            $("#replay").click(function () {
                jigsawGame.replay();
                $("#myModal").modal('hide');
            });

            // Reposition when a modal is shown
            $('.modal').on('show.bs.modal', reposition);
            // Reposition when the window is resized
            $(window).on('resize', function () {
                $('.modal:visible').each(reposition);
            });
        });
    </script>
</body>

</html>